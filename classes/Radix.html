<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Radix [Radix]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Radix
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/lib/radix_rb.html">lib/radix.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            <a href="Radix.html">Radix</a> coverts to and from any base.
            </p>
            <p>
            Base conversions with ASCII ordered notations are easy in Ruby.
            </p>
            <pre>255.to_s(16)   #=&gt; &quot;FF&quot;&#x000A;&quot;FF&quot;.to_i(16)  #=&gt; 255</pre>
            <p>
            But Ruby reaches it&#8217;s limit at base 36.
            </p>
            <pre>255.to_s(37)   #=&gt; Error</pre>
            <p>
            <a href="Radix.html">Radix</a> provides the means of converting to and from
            any base.
            </p>
            <pre>Radix.convert_base([100, 10], 256, 10)&#x000A;#=&gt; [2,5,6,1,0]</pre>
            <p>
            And it can handle any notation upto base 62.
            </p>
            <pre>Radix.convert(&quot;10&quot;, 62, 10)  #=&gt; &quot;62&quot;</pre>
            <p>
            And the notations need not be in ASCII order &#8212;odd notations can be
            used.
            </p>
            <pre>b10 = Radix.new([:Q, :W, :E, :R, :T, :Y, :U, :I, :O, :U])&#x000A;b10.convert(&quot;FF&quot;, 16) #=&gt; &quot;EYY&quot;</pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000006">convert</a></li>
              <li><a href="#M000007">convert_base</a></li>
              <li><a href="#M000001">new</a></li>
              <li><a href="#M000008">standard_radix</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000004">convert</a></li>
              <li><a href="#M000005">convert_base</a></li>
              <li><a href="#M000003">decode</a></li>
              <li><a href="#M000002">encode</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BASE10</td>
                    <td>=</td>
                    <td class='context-item-value'>[&quot;0&quot;..&quot;9&quot;].map { |r| r.to_a }.flatten</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BASE12</td>
                    <td>=</td>
                    <td class='context-item-value'>[&quot;0&quot;..&quot;9&quot;, [&quot;X&quot;, &quot;E&quot;]].map { |r| r.to_a }.flatten</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BASE16</td>
                    <td>=</td>
                    <td class='context-item-value'>[&quot;0&quot;..&quot;9&quot;, &quot;A&quot;..&quot;F&quot;].map { |r| r.to_a }.flatten</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BASE36</td>
                    <td>=</td>
                    <td class='context-item-value'>[&quot;0&quot;..&quot;9&quot;, &quot;A&quot;..&quot;Z&quot;].map { |r| r.to_a }.flatten</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BASE60</td>
                    <td>=</td>
                    <td class='context-item-value'>[&quot;0&quot;..&quot;9&quot;, &quot;a&quot;..&quot;z&quot;, &quot;A&quot;..&quot;X&quot;].map { |r| r.to_a }.flatten</td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>BASE62</td>
                    <td>=</td>
                    <td class='context-item-value'>[&quot;0&quot;..&quot;9&quot;, &quot;a&quot;..&quot;z&quot;, &quot;A&quot;..&quot;Z&quot;].map { |r| r.to_a }.flatten</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>base</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>chars</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>values</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='public-class method' id='method-M000006'>
                <a name='M000006'>      </a>
                <div class='synopsis'>
                  <span class='name'>convert</span>
                  <span class='arguments'>(number, from_base, to_base)</span>
                </div>
                <div class='description'>
                  <p>
                  Do a standard conversion upto base 62.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000006-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000006-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 84</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-identifier">number</span>, <span class="ruby-identifier">from_base</span>, <span class="ruby-identifier">to_base</span>)&#x000A;    <span class="ruby-identifier">r1</span> = <span class="ruby-identifier">standard_radix</span>(<span class="ruby-identifier">from_base</span>)&#x000A;    <span class="ruby-identifier">r2</span> = <span class="ruby-identifier">standard_radix</span>(<span class="ruby-identifier">to_base</span>)&#x000A;    <span class="ruby-identifier">r2</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-identifier">number</span>, <span class="ruby-identifier">r1</span>)&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000007'>
                <a name='M000007'>      </a>
                <div class='synopsis'>
                  <span class='name'>convert_base</span>
                  <span class='arguments'>(digits, from_base, to_base)</span>
                </div>
                <div class='description'>
                  <p>
                  Convert any base to any other base, using array of <tt>digits</tt>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000007-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000007-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 91</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">convert_base</span>(<span class="ruby-identifier">digits</span>, <span class="ruby-identifier">from_base</span>, <span class="ruby-identifier">to_base</span>)&#x000A;    <span class="ruby-identifier">bignum</span> = <span class="ruby-value">0</span>&#x000A;    <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">digit</span><span class="ruby-operator">|</span> <span class="ruby-identifier">bignum</span> = <span class="ruby-identifier">bignum</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">from_base</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">digit</span> }&#x000A;    <span class="ruby-identifier">converted</span> = []&#x000A;    <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">bignum</span>.<span class="ruby-identifier">zero?</span>&#x000A;      <span class="ruby-identifier">bignum</span>, <span class="ruby-identifier">digit</span> = <span class="ruby-identifier">bignum</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-identifier">to_base</span>)&#x000A;      <span class="ruby-identifier">converted</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">digit</span>)&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;    <span class="ruby-identifier">converted</span>.<span class="ruby-identifier">reverse</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000001'>
                <a name='M000001'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(chars=BASE62)</span>
                </div>
                <div class='description'>
                  <p>
                  New <a href="Radix.html">Radix</a> using <tt>chars</tt> representation.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000001-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000001-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 41</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">chars</span>=<span class="ruby-constant">BASE62</span>)&#x000A;    <span class="ruby-ivar">@chars</span>  = <span class="ruby-identifier">chars</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">to_s</span> }&#x000A;    <span class="ruby-ivar">@base</span>   = <span class="ruby-ivar">@chars</span>.<span class="ruby-identifier">size</span>&#x000A;    <span class="ruby-ivar">@values</span> = <span class="ruby-constant">Hash</span>[<span class="ruby-operator">*</span>(<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@base</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> [ <span class="ruby-ivar">@chars</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">i</span> ] }.<span class="ruby-identifier">flatten</span>]&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000008'>
                <a name='M000008'>      </a>
                <div class='synopsis'>
                  <span class='name'>standard_radix</span>
                  <span class='arguments'>(integer_base)</span>
                </div>
                <div class='description'>
                  <p>
                  Provide a standard representation of a base upto 62.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 103</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">standard_radix</span>(<span class="ruby-identifier">integer_base</span>)&#x000A;    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">integer_base</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">36</span>&#x000A;      <span class="ruby-constant">Radix</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">BASE62</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">integer_base</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>])&#x000A;    <span class="ruby-keyword kw">else</span>&#x000A;      <span class="ruby-constant">Radix</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">BASE36</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">integer_base</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>])&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000004'>
                <a name='M000004'>      </a>
                <div class='synopsis'>
                  <span class='name'>convert</span>
                  <span class='arguments'>(number, from_radix)</span>
                </div>
                <div class='description'>
                  <p>
                  Convert a representational <tt>number</tt> of <tt>from_radix</tt> to the
                  radix.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000004-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000004-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 61</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">convert</span>(<span class="ruby-identifier">number</span>, <span class="ruby-identifier">from_radix</span>)&#x000A;    <span class="ruby-identifier">from_radix</span> = <span class="ruby-identifier">standard_radix</span>(<span class="ruby-identifier">from_radix</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Integer</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">from_radix</span>&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">number</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">//</span>)&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">digit</span><span class="ruby-operator">|</span> <span class="ruby-identifier">from_radix</span>.<span class="ruby-identifier">values</span>[<span class="ruby-identifier">digit</span>] }&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">convert_base</span>(<span class="ruby-identifier">digits</span>, <span class="ruby-identifier">from_radix</span>.<span class="ruby-identifier">base</span>, <span class="ruby-identifier">base</span>)&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">digit</span><span class="ruby-operator">|</span> <span class="ruby-identifier">chars</span>[<span class="ruby-identifier">digit</span>] }&#x000A;    <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">join</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000005'>
                <a name='M000005'>      </a>
                <div class='synopsis'>
                  <span class='name'>convert_base</span>
                  <span class='arguments'>(digits, from_base, to_base)</span>
                </div>
                <div class='description'>
                  <p>
                  Convert any base to any other base, using array of <tt>digits</tt>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000005-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000005-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 71</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">convert_base</span>(<span class="ruby-identifier">digits</span>, <span class="ruby-identifier">from_base</span>, <span class="ruby-identifier">to_base</span>)&#x000A;    <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">convert_base</span>(<span class="ruby-identifier">digits</span>, <span class="ruby-identifier">from_base</span>, <span class="ruby-identifier">to_base</span>)&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000003'>
                <a name='M000003'>      </a>
                <div class='synopsis'>
                  <span class='name'>decode</span>
                  <span class='arguments'>(encoded)</span>
                </div>
                <div class='description'>
                  <p>
                  Decode a string that was previously encoded in the radix.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000003-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000003-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 55</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decode</span>(<span class="ruby-identifier">encoded</span>)&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">encoded</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">//</span>).<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@values</span>[<span class="ruby-identifier">c</span>] }&#x000A;    <span class="ruby-identifier">convert_base</span>(<span class="ruby-identifier">digits</span>, <span class="ruby-identifier">base</span>, <span class="ruby-value">256</span>).<span class="ruby-identifier">pack</span>(<span class="ruby-value str">&quot;C*&quot;</span>)&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000002'>
                <a name='M000002'>      </a>
                <div class='synopsis'>
                  <span class='name'>encode</span>
                  <span class='arguments'>(byte_string)</span>
                </div>
                <div class='description'>
                  <p>
                  Encode a string in the radix.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000002-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000002-source'><span class="ruby-comment cmt"># File lib/radix.rb, line 48</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encode</span>(<span class="ruby-identifier">byte_string</span>)&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">byte_string</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-value str">&quot;C*&quot;</span>)&#x000A;    <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">convert_base</span>(<span class="ruby-identifier">digits</span>, <span class="ruby-value">256</span>, <span class="ruby-identifier">base</span>)&#x000A;    <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@chars</span>[<span class="ruby-identifier">d</span>] }.<span class="ruby-identifier">join</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
